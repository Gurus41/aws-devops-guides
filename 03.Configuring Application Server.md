# Configuring an Application Server Using Apache Tomcat on AWS

![alt text](<Configuring Application Server | Using Apache Tomcat.png>)

## Step-by-Step Instructions

### Step 1: Launch EC2 Instance

1. Log in to the AWS Management Console and navigate to the EC2 Dashboard (search for "EC2").
2. Click **Launch instance**.
3. **Settings:**
   - **Name:** app-server
   - **AMI:** Red Hat Enterprise Linux (or Amazon Linux 2)
   - **Instance type:** t2.micro
   - **Key pair:** Select an existing key pair
   - **Network settings:**
     - **VPC:** Use the default VPC
     - **Subnet:** Choose any public subnet
     - **Auto-assign public IP:** Enable
   - **Security group:** Create a new one (e.g., app-server) allowing:
     - SSH (port 22) from your IP (or 0.0.0.0/0 for testing)
     - HTTP (port 80) from 0.0.0.0/0
     - Custom TCP (port 8080) from 0.0.0.0/0 (for Tomcat)
4. Click **Launch instance**.

> **Tip:** Ensure the security group rules are added to allow access to ports 80 and 8080.

### Step 2: SSH into the EC2 Instance

1. Once the instance is running, note its public IP from the EC2 console.
2. SSH into the instance:
```bash
ssh -i your-key.pem root@public-ip
```
> Note: Use `ec2-user` for Amazon Linux instead of `root` for Red Hat.

### Step 3: Install Java (Prerequisite for Tomcat)

1. Update packages (optional):
```bash
yum update -y
```

2. Install Java 1.8:
```bash
yum install java-1.8.0-openjdk -y
```

3. Verify installation:
```bash
java -version
```

### Step 4: Install Net Tools (Optional for Debugging)

```bash
yum install net-tools -y
```

### Step 5: Download and Extract Apache Tomcat

1. Navigate to a temporary directory:
```bash
cd /etc
```

2. Download Tomcat:
```bash
wget https://downloads.apache.org/tomcat/tomcat-10/v10.1.50/bin/apache-tomcat-10.1.50.tar.gz
```

3. Extract the file:
```bash
tar -xvfz apache-tomcat-9.0.65.tar.gz
```
4. Start the server:
```bash
./startup.sh
```
5. Verify the port is listening:
```bash
netstat -tulnp | grep 8080
```

6. In a browser, access:
```
http://<public-ip>:8080
```
You should see the Apache Tomcat default page.

7. Create a soft link:
```bash
ln -s apache-tomcat-9.0.65 tomcat
```
cd  etc/tomcat/bin ---CATALINA_HOME[TOMCAT_HOME]

## Advanced Setup: Integrate with Apache HTTP Server (Reverse Proxy)

For production, use Apache as a front-end proxy:

1. Install Apache:
```bash
yum install httpd -y
```

2. Start and enable:
```bash
systemctl start httpd
systemctl enable httpd
```

3. Enable Selinux Security (REDHAT)
```bash
setsebool -P httpd_can_network_connect on
```

4. Create proxy config:
```bash
vi /etc/httpd/conf.d/proxypass.conf
```

4. Add the following content:
```apache
ProxyPass / http://localhost:8080/
ProxyPassReverse / http://localhost:8080/
```

5. Restart Apache:
```bash
systemctl restart httpd
```

6. Test: Access `http://<public-ip>` (port 80 routes to Tomcat).

### Step 6: CSet Environment Variable (Optional) for Web Server & Application Server

1. Create the WebServer variables:
```bash
export APACHE_HOME=/etc/httpd
echo $APACHE_HOME
cd $APACHE_HOME
```

2. Create the ApplicationServer variables:
```bash
export TOMCAT_HOME=/etc/tomcat
echo $TOMCATE_HOME
cd $TOMCATE_HOME
```

### Test the Tomcat Server

1. Verify the port is listening:
```bash
netstat -tulnp | grep 8080
```

2. In a browser, access:
```
http://<public-ip>:80
```
You should see the Apache Tomcat default page.



> **Tip:** This hides Tomcat's port and allows easier management.

## Cleanup

To avoid charges:

- Terminate the EC2 instance (via EC2 > Instances).
- Delete security groups if no longer needed.
---
